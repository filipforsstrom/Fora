@inject IInterestService InterestService
@inject IAuthService AuthService

<MudText Typo="Typo.h6">Remove Created Interest From User</MudText>

<MudTable Items="@UserCreatedInterestsList" Hover="true" Breakpoint="Breakpoint.Sm">
    <HeaderContent>
        <MudTh>Nr</MudTh>
        <MudTh>Name</MudTh>
        <MudTh>Delete Interest</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Nr">@context.Id</MudTd>
        <MudTd DataLabel="Sign">@context.Name</MudTd>
        <MudTd DataLabel="Delete Interest">
        <MudButton @onclick="(() => DeleteInterest(context.Id))">X</MudButton></MudTd>
    </RowTemplate>
</MudTable>


@code {

    public int InterestId { get; set; }
    private int UserId { get; set; }

    private List<InterestModel> UserCreatedInterestsList { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        UserId = await AuthService.GetUserId();
        UserCreatedInterestsList = await InterestService.GetUserCreatedInterests(UserId);
    }

    public async Task DeleteInterest(int id)
    {
        InterestDeleteDto interestToDelete = new InterestDeleteDto
        {
            Id = id
        };

        await InterestService.DeleteInterest(interestToDelete);
        StateHasChanged();
    }

}
