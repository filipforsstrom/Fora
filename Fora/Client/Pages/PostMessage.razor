@inject IMessageService MessageService
@inject NavigationManager NavManager

<EditForm Model="@Message" OnValidSubmit="@CreateMessage">
    <DataAnnotationsValidator/>
    <ValidationSummary></ValidationSummary>

    <MudTextField T="string" Lines="2" Variant="Variant.Outlined" @bind-Value="Message.Message"></MudTextField>
    <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.Send" Color="Color.Primary">Send</MudButton>
</EditForm>

@code {
    [Parameter]
    public int ThreadId { get; set; }
    private MessageCreateDto Message { get; set; } = new();


    private void CreateMessage()
    {

        Message.ThreadId = ThreadId;
        Message.UserId = 1;
        MessageService.CreateMessage(Message);
        NavManager.NavigateTo($"/messages/{ThreadId}");
    }

}
